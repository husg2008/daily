<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>

	<div id="searchPostions" style="">
	    <input placeholder="请输入搜索地点名称" id="words" onkeyup="autoInput(this)" style="width: 160px;
	    margin-top: 14px;
	    margin-left: 14px;
	    height: 25px;
	    border-radius: 3px;
	    border: 0;
	    padding: 0 5px 0 5px;
	    font-size: 15px;
	    border:1px solid red">
    </div>
    <div id="search_results_div" style="width: 260px;height: 200px;border:1px solid blue"></div>
<!-- 搜索结果  -->
    <script >
    
		   function autoInput(t){
		            if(!t){
		                return;
		            }
		            var keywords = t.value;
		            if(t.value==""){
		                document.getElementById("search_results_div").innerHTML="";
		                document.getElementById("search_results_div").style.display="none";
		                return;
		            }
		            AMap.plugin('AMap.PlaceSearch', function(){
		                var autoOptions = {city: '全国'};
		                var placeSearch = new AMap.PlaceSearch(autoOptions);
		                placeSearch.search(keywords, function(status, result) {
		                    console.log("status");
		                    console.log(status);
		                    if(status=="complete"){    // no_data
		                        if(result.info=="OK"){
		                            if(result.poiList&&result.poiList.count>0){
		                                var poiList=result.poiList.pois;
		                                console.log("result.poiList.pois: ");
		                                console.log(poiList);
		                                    let poiListCount=result.poiList.count;
		                                    var htmlTmp="";
		                                    for(var i=0;i<poiList.length;i++){     
		                                    // 查询出的是分页结果
		                                        var htmlTmp1 ="<div class='map_result_item' data-longitude="+poiList[i].location.lng+" data-latitude="+poiList[i].location.lat +" onclick='setmapToBylngAndLat(this)'>" +poiList[i].name+
		                                            "<span class='map_result_item_span'> "+poiList[i].address+"</span>\n" +
		                                            "</div>";
		                                        htmlTmp=htmlTmp+htmlTmp1;
		                                        // 查询结果对象存储，用于点击的3D定位
		        
		                                    }
		                                    document.getElementById("search_results_div").innerHTML=htmlTmp;
		                            }else {
		                                document.getElementById("search_results_div").innerHTML="无搜索结果";
		                            }
		                        }else {
		                            document.getElementById("search_results_div").innerHTML="无搜索结果";
		                        }
		                    }else{
		                        document.getElementById("search_results_div").innerHTML="无搜索结果";
		                    }
		                    document.getElementById("search_results_div").style.display="block";
		                })
		            })
		        }
		        //核心就是利用高德的插件获取经纬度啦
				 //cesium组件 用于定位，视野
				 var loactionEntity;
				//点击事件 选中一个地点，3D跳转到
				function setmapToBylngAndLat(t) {
				   var longitude =t.getAttribute("data-longitude");
				   var latitude =t.getAttribute("data-latitude");
				   if(loactionEntity)
				        viewer.entities.remove(loactionEntity);    //viewer 3D cesium实体
				        loactionEntity = new Cesium.Entity({
				            id : 'loactionEntity',
				            position : Cesium.Cartesian3.fromDegrees(longitude, latitude),
				            point : {
				                pixelSize : 10,
				                color : Cesium.Color.WHITE.withAlpha(0),
				                outlineColor : Cesium.Color.WHITE.withAlpha(0),
				                outlineWidth : 1
				            }
				        });
				        viewer.entities.add(loactionEntity);
				        viewer.flyTo(loactionEntity, {
				            offset : {
				                heading : Cesium.Math.toRadians(0.0),
				                pitch : Cesium.Math.toRadians(-90),
				                range : 10000
				            }
				    });

				   document.getElementById("search_results_div").style.display="none";
				}

 </script>
 <script src="https://webapi.amap.com/maps?v=1.4.10&key=65e6ce850dd2d55783debe396425eee1&plugin=AMap.PlaceSearch"></script>


</body>
</html>